TF = fi([0.99999999 0.99999999 0.99999999 0.99999999 0.99999999 0.99999999 0.99999999 0.99999999 0.98078528 0.83146961 0.55557023 0.19509032 0.19509032 0.55557023 0.83146961 0.98078528 0.92387953 0.38268343 0.38268343 0.92387953 0.92387953 0.38268343 0.38268343 0.92387953 0.83146961 0.19509032 0.98078528 0.55557023 0.55557023 0.98078528 0.19509032 0.83146961 0.70710678 0.70710678 0.70710678 0.70710678 0.70710678 0.70710678 0.70710678 0.70710678 0.55557023 0.98078528 0.19509032 0.83146961 0.83146961 0.19509032 0.98078528 0.55557023 0.38268343 0.92387953 0.92387953 0.38268343 0.38268343 0.92387953 0.92387953 0.38268343 0.19509032 0.55557023 0.83146961 0.98078528 0.98078528 0.83146961 0.55557023 0.19509032], 1, 16, 15, 'RoundingMethod', 'Floor'); %! RFILE<> [0:1, 1]

x_0 = fi([0.012024 0.012024 0.012146 0.012421 0.012665 0.012817 0.011780 0.011383 0.011627 0.012817 0.012024 0.012024 0.012146 0.012421 0.012665 0.012817 0.011780 0.011383 0.011627 0.012817 0.012024 0.012024 0.012146 0.012421 0.012665 0.012817 0.011780 0.011383 0.011627 0.012817 0.011627 0.012817], 1, 16, 15, 'RoundingMethod', 'Floor'); %! RFILE<> [0, 0]
x_1 = fi([0.012024 0.012024 0.012146 0.012421 0.012665 0.012817 0.011780 0.011383 0.011627 0.012817 0.012024 0.012024 0.012146 0.012421 0.012665 0.012817 0.011780 0.011383 0.011627 0.012817 0.012024 0.012024 0.012146 0.012421 0.012665 0.012817 0.011780 0.011383 0.011627 0.012817 0.011627 0.012817], 1, 16, 15, 'RoundingMethod', 'Floor'); %! RFILE<> [1, 0]

X_0 = fi(zeros(1,32), 1, 16, 15, 'RoundingMethod', 'Floor'); %! RFILE<> [0, 2]
X_1 = fi(zeros(1,32), 1, 16, 15, 'RoundingMethod', 'Floor'); %! RFILE<> [1, 2]

% dct 1d row by row
for r=1:4
  for c=1:8
    %! RESOURCE_SHARING_BEGIN
    X_0((r-1)*8+c) = sum(x_0((r-1)*8+1:r*8) .* TF((c-1)*8+1:c*8)); %! DPU [0,1]
    X_1((r-1)*8+c) = sum(x_1((r-1)*8+1:r*8) .* TF((c-1)*8+1:c*8)); %! DPU [1,1]
    %! RESOURCE_SHARING_END
  end
end

% transpose
%for r=1:4
%  for c=1:4
%     x_0((r-1)*8+c)   = X_0((c-1)*8+r);
%     x_0((r-1)*8+c+4) = X_1((c-1)*8+r);
%     x_1((r-1)*8+c)   = X_0((c-1)*8+r+4);
%     x_1((r-1)*8+c+4) = X_1((c-1)*8+r+4);
%   end
% end

% dct 1d row by row
% for r=1:4
%  for c=1:8
%    %! RESOURCE_SHARING_BEGIN
%    X_0((r-1)*8+c) = sum(x_0((r-1)*8+1:r*8) .* TF((c-1)*8+1:c*8)); %! DPU [0,1]
%    X_1((r-1)*8+c) = sum(x_1((r-1)*8+1:r*8) .* TF((c-1)*8+1:c*8)); %! DPU [1,1]
%    %! RESOURCE_SHARING_END
%   end
% end
