
% Quantization testcase

% Features:
%  - Quntization with a 32 register file and 1 DPU

q0 = fi([0.5 0.9999 0.9999 0.9999 0.9999 0.9999 0.5 0.9999 0.9999 0.9999 0.5 0.5 0.5 0.5 0.5 0.25 0.3333 0.5 0.5 0.5 0.5 0.2 0.25 0.25 0.3333 0.25 0.1666 0.2 0.1666 0.1666 0.1666 0.2], 1, 16, 15, 'RoundingMethod', 'Floor'); %! RFILE<input> [0, 0]
q1 = fi([0.1666 0.1666 0.16666666666666666 0.14285714285714285 0.1111111111111111 0.125 0.16666666666666666 0.14285714285714285 0.1111111111111111 0.14285714285714285 0.16666666666666666 0.16666666666666666 0.125 0.09090909090909091 0.125 0.1111111111111111 0.1 0.1 0.1 0.1 0.1 0.16666666666666666 0.125 0.09090909090909091 0.08333333333333333 0.09090909090909091 0.1 0.0833 0.1111 0.1 0.1 0.1], 1, 16, 15, 'RoundingMethod', 'Floor'); %! RFILE<input> [1, 0]

x0 = fi([0.012024 0.012024 0.012146 0.012421 0.012665 0.012817 0.011780 0.011383 0.011627 0.012817 0.013733 0.014130 0.014374 0.014893 0.016998 0.012146 0.012024 0.012024 0.012146 0.012421 0.012665 0.012817 0.011780 0.011383 0.011627 0.012817 0.013733 0.014130 0.014374 0.014893 0.016998 0.012146], 1, 16, 15, 'RoundingMethod', 'Floor');  %! RFILE<input> [0, 1]
x1 = fi([0.012024 0.012024 0.012146 0.012421 0.012665 0.012817 0.011780 0.011383 0.011627 0.012817 0.013733 0.014130 0.014374 0.014893 0.016998 0.012146 0.012024 0.012024 0.012146 0.012421 0.012665 0.012817 0.011780 0.011383 0.011627 0.012817 0.013733 0.014130 0.014374 0.014893 0.016998 0.012146], 1, 16, 15, 'RoundingMethod', 'Floor');  %! RFILE<input> [1, 1]

y0 = fi(zeros(1, 64), 1, 16, 15, 'RoundingMethod', 'Floor');  %! RFILE<output> [0, 2]
y1 = fi(zeros(1, 64), 1, 16, 15, 'RoundingMethod', 'Floor');  %! RFILE<output> [1, 2]


y0(1:32) = x0(1:32) .* q0(1:32); %! DPU<sat>[0,0]
y1(1:32) = x1(1:32) .* q1(1:32); %! DPU<sat>[0,0]
